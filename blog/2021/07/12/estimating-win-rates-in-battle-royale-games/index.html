<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JCE3PGK5NB"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-JCE3PGK5NB');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estimating Win Rates in Battle Royale Games</title>
    <link rel="icon" type="image/png" href="/images/aleph.png">
    <link rel="stylesheet" href="/style.css">
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$']],
        displayMath: [['$$', '$$']]
      }
    };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
    <nav class="nav">
        <a href="/">Home</a>
        <a href="/about/">About</a>
        <a href="/feed.xml">RSS</a>
    </nav>
    <article>
        <div class="post-date">July 12, 2021</div>
        <h1>Estimating Win Rates in Battle Royale Games</h1>
        <p><img alt="Image" src="/images/apex-legends.jpg" /></p>
<p>For the past year, I've been completely obsessed with <a href="https://www.ea.com/games/apex-legends">Apex Legends</a>, a <a href="https://en.wikipedia.org/wiki/Battle_royale_game">battle royale</a> game that pits 20 teams of 3 players against each other in a shrinking map. Teams fight and eliminate each other until a single team is left standing.</p>
<p>I've watched my win rate for each competitive season of the game and wondered what a reasonable win rate for an average player might be. There are a bunch of factors to consider and the more I thought about it the more I realized I'd need to turn to simulation understand how the factors would interact with each other. I'm going to share my thinking and results and I'd love to hear what else should be considered.</p>
<h1>Initial Expectations</h1>
<p>In a simple world where all players are of equal skill, you'd expect the win rate for all players to converge to 0.05, since there are 20 teams in each match.</p>
<p>Not all players are equal, of course! We might expect that an average-skilled player will have a win rate significantly below 0.05, since you have to beat <em>everyone</em> and it's very likely there will be better players present in each match.</p>
<p>Since it's an elimination style game, worse players will return to the queue of players for the next game at a much faster rate than better players. We would then expect to see the distribution of players in each game to not be the same as the overall population distribution. Worse players will be overrepresented in each game, possibly driving the win rate for average-skilled players up.</p>
<p>Another important consideration is that it's a team game and the teams are totally random if we assume everyone is <a href="https://www.urbandictionary.com/define.php?term=Solo%20queue">solo-queueing</a>. This could have an averaging effect on each team's aggregate skill, pushing the expected win rate closer to 0.05. We'll also see that the choice of aggregation function will have a big impact on the expected win rate of best and worst players.</p>
<p>We have some factors that could push the expected win rate for an average-skilled player over 0.05, under 0.05, and towards 0.05. How do these factors interact? Which matter most?</p>
<h1>Basic Simulation Framework</h1>
<p>We'll simulate the behavior of an entire population by maintaining two queues. One  is a queue of players waiting to join a new game and the other is a queue of active games from which players will be eliminated and returned to the waiting queue.</p>
<p>Start by populating the waiting queue with a set of players with skills sampled from a distribution. Then, in a loop:</p>
<ol>
<li>Check if there are at least <code>gameSize</code> players in the waiting queue to start a new game. We need 60 players for a game in Apex Legends.</li>
<li>If there are, randomly assign the players to teams of size <code>teamSize</code>.</li>
<li>Apply a <code>teamSkillFunction</code> to each team to compute the aggregated team skill.</li>
<li>Apply a probabilistic sort using the team skills as weights to determine the order in which teams will be elimated.</li>
<li>Add the newly created game to the end of the active game queue.</li>
<li>Move the next eliminated team from the head of the active game queue to the waiting queue.</li>
<li>If there are any teams remaining in the active game selected in step #6, put the updated game at the end of the active game queue.</li>
</ol>
<h1>Probabilistic Sorting</h1>
<p>One design decision is how to determine the results of a game given a set of skill values for each team. The approach I took was to treat the skill value as a weight and to sample from the weighted discrete distribution to pick a winner. We continue to pick a team from the remaining teams until a full elimation order has been chosen.</p>
<p>This ordering can be computed by doing random selection as described above, but it can also be done efficiently by sampling a value for each team $i$ from a <a href="https://en.wikipedia.org/wiki/Beta_distribution">beta distribution</a> parameterized as $\text{B}(1, w_i)$ and then sorting by the sampled values. This ends up giving the same result because $$P(x &lt; y \mid x \sim \text{B}(1, w_i), y \sim \text{B}(1, w_j)) = \frac{w_i}{w_i + w_j}$$ ...which I think is a pretty neat result.</p>
<p>Mathematica's built-in <a href="https://reference.wolfram.com/language/ref/RandomSample.html">RandomSample</a> function was used to compute these weighted pseudorandom permutations.</p>
<p>This method is a dramatic simplification of how games actually play out, but it's sufficient for demonstrating a lot of the interesting effects I was hoping to explore.</p>
<h1>Simulating a Solo Battle Royale (Tetris 99)</h1>
<p>Before we jump into simulating Apex Legends, which has the complexity of figuring out how to combine players skill as a team, let's look at a simpler battle royale game that has individuals competing:</p>
<p><img alt="Image" src="/images/tetris-99.jpeg" /></p>
<p>The idea is basically the same and the same simulator defined above can easily be used to explore win rate dynamics here. In Tetris 99, there are 99 players playing Tetris simultaneously. When a player clears multiple lines, they can have junk pieces randomly dropped on any of the other players. Again, the last player standing wins.</p>
<p><img alt="Image" src="/images/tetris-99-gameplay.jpg" /></p>
<p>Here, we expect the factors that push the expected win rate away from the baseline of 1/99 to be even stronger than in Apex Legends. With 99 players, it's extremely likely that there will be multiple players better than you, but we also will expect better players to remain in matches much longer and new games will have worse players overrepresented.</p>
<p>First, let's verify the baseline case by running a simulation where all players have the same skill:</p>
<div class="codehilite"><pre><span></span><code><span class="nv">tetrisConstantSkill</span><span class="w"> </span><span class="nb">= </span><span class="nv">SimulateBattleRoyale</span><span class="p">[</span>
<span class="w">   </span><span class="nv">&lt;|</span>
<span class="w">    </span><span class="s">&quot;playerCount&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="mi">99</span>,
<span class="w">    </span><span class="s">&quot;teamSize&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="mi">1</span>,
<span class="w">    </span><span class="s">&quot;gameSize&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="mi">99</span>,
<span class="w">    </span><span class="s">&quot;iterations&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="mi">10000000</span>,
<span class="w">    </span><span class="s">&quot;skillFunction&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="p">(</span><span class="nf">ConstantArray</span><span class="p">[</span><span class="mi">1</span>,<span class="w"> </span><span class="nv">Length</span><span class="o">@#</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="p">)</span>,
<span class="w">    </span><span class="s">&quot;teamSkillFunction&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="nv">Total</span>
<span class="w">    </span><span class="nv">|&gt;</span>
<span class="w">   </span><span class="p">]</span><span class="c1">;</span>
</code></pre></div>

<p>With 1000 players and 10,000,000 iterations, we end up with a normal looking distribution of win rates:</p>
<p><img alt="Image" src="/images/br-tetris-const.png" /></p>
<p>The mean is $0.0101018$, which is very close to $1/99 = 0.\overline{01}$.</p>
<p>Now we can start to explore how the dynamics of differing skills affect the distribution of win rates. Let's use uniformly distributed player skills. We won't see the effect of the queue if we have exactly 99 players in our population, so each game contains the full uniformly distributed set of skills.</p>
<p><img alt="Image" src="/images/br-tetris-uniform-small.png" /></p>
<p>This linear result is expected, since the likelihood of a player $i$ being chosen as the winner is $w_i / \sum_{j=1}^{99} w_j$ and the denominator is a constant. It starts to become interesting and less easy to compute analytically when we introduce the fact that worse players are elimated earlier from the game and returned to the player queue. Let's run with 1000 players in the population instead of exactly 99:</p>
<div class="codehilite"><pre><span></span><code><span class="nv">tetris</span><span class="w"> </span><span class="nb">= </span><span class="nv">SimulateBattleRoyale</span><span class="p">[</span><span class="nv">&lt;|</span>
<span class="w">    </span><span class="s">&quot;playerCount&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="mi">1000</span>,
<span class="w">    </span><span class="s">&quot;teamSize&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="mi">1</span>,
<span class="w">    </span><span class="s">&quot;gameSize&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="mi">99</span>,
<span class="w">    </span><span class="s">&quot;iterations&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="mi">10000000</span>,
<span class="w">    </span><span class="s">&quot;skillFunction&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="nv">Identity</span>,
<span class="w">    </span><span class="s">&quot;teamSkillFunction&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="nv">Total</span>
<span class="w">    </span><span class="nv">|&gt;</span><span class="p">]</span><span class="c1">;</span>
</code></pre></div>

<p>This is where it starts to get interesting! Worse players get elimated earlier, so they queue up for more games and end up with a much higher count of games played:</p>
<p><img alt="Image" src="/images/br-tetris-pdf.png" /></p>
<p>Now that there are 1000 players in the population, the expected win rate for player $i$ is $w_i / \sum_{j=1}^{1000} p_j w_j$, where $p_j$ is the probability that player $j$ is in the game. The plot above is actually the same shape as the PDF of skill levels in an average game and can be used to compute $p$.</p>
<p>We still expect there to be a linear relationship for the win rate, but with a different slope because the denominator is now a different constant. Before the denominator was $\sum_{j=1}^{99} w_j = 99 * \frac{1}{2} = 49.5$, but with the queue dynamics in place and 1000 players, it's $38.73$. This translates to a $27.8\%$ increase in the expected win rate for each player because they tend to be up against weaker competition.</p>
<p>There are a ton of simplifying assumptions here, but I think the most egregiously wrong is the choice of distribution of for player skill in the population. There's a long tail of skill, which is supported by my 14.5% win rate:</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Created my own account so my filthy casual family stops messing with my Tetris 99 stats <a href="https://t.co/PDYxCjPXrL">pic.twitter.com/PDYxCjPXrL</a></p>&mdash; Aͫdͣeͭrͭeth (@adereth) <a href="https://twitter.com/adereth/status/1103817681893908480?ref_src=twsrc%5Etfw">March 8, 2019</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<h1>Simulating Team Games (Apex Legends)</h1>
<p>Now that we've established that the variable amount of time a player lasts in a game can push up the expected win rate, let's look at the effect of random 3 person teams. There are a ton of different ways we can choose to aggregate the skill level of a team, but let's start with the obvious choice of averaging the skills of the team members:</p>
<div class="codehilite"><pre><span></span><code><span class="nv">apexMean</span><span class="w"> </span><span class="nb">= </span><span class="nv">SimulateBattleRoyale</span><span class="p">[</span><span class="nv">&lt;|</span>
<span class="w">    </span><span class="s">&quot;playerCount&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="mi">1000</span>,
<span class="w">    </span><span class="s">&quot;teamSize&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="mi">3</span>,
<span class="w">    </span><span class="s">&quot;gameSize&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="mi">60</span>,
<span class="w">    </span><span class="s">&quot;iterations&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="mi">10000000</span>,
<span class="w">    </span><span class="s">&quot;skillFunction&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="nv">Identity</span>,
<span class="w">    </span><span class="s">&quot;teamSkillFunction&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="nv">Mean</span>
<span class="w">    </span><span class="nv">|&gt;</span><span class="p">]</span><span class="c1">;</span>
</code></pre></div>

<p><img alt="Image" src="/images/br-apex-mean-wr.png" /></p>
<p>We still observe an approximately linear win rate but with a key difference: a positive intercept. The expected win rate is now:</p>
<p>$$\frac{w_i/3 + 2 \bar{t} / 3}{w_i/3 + 2 \bar{t} / 3 + 19 \bar{t}}$$</p>
<p>where $\bar{t}$ is the expected average skill level in a game. We'll assume that the population is large enough that removing player $i$ from the pool of possible players doesn't significantly affect $\bar{t}$. We can see that in this model even the worst player ($w_i = 0$) has a $\frac{2/3}{19 + 2/3} = 0.0339$ likelihood of winning. It's interesting to note that the intercept here is independent on the distribution of player skills and only depends on our choice of team aggregation function and winner selection method.</p>
<p>We can also look at the count of games played to get a sense for the expected distribution of player skills in a given game:</p>
<p><img alt="Image" src="/images/br-apex-mean-pdf.png" /></p>
<p>Even though worse players are losing faster and returning to the queue more often, the discrepency between the worst and best players isn't nearly as dramatic as it was in the Tetris 99 simulation.</p>
<h2>Alternative Aggregations</h2>
<p>Instead of using the mean of the players, we can experiment with other aggregation functions. We can imagine a game where a teams performance is limited by its worst player by using a min function or a game where strong players are able to <a href="https://www.urbandictionary.com/define.php?term=carry">carry</a> by using a max function.</p>
<h3>Min</h3>
<div class="codehilite"><pre><span></span><code><span class="nv">apexMin</span><span class="w"> </span><span class="nb">= </span><span class="nv">SimulateBattleRoyale</span><span class="p">[</span><span class="nv">&lt;|</span>
<span class="w">    </span><span class="s">&quot;playerCount&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="mi">1000</span>,
<span class="w">    </span><span class="s">&quot;teamSize&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="mi">3</span>,
<span class="w">    </span><span class="s">&quot;gameSize&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="mi">60</span>,
<span class="w">    </span><span class="s">&quot;iterations&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="mi">10000000</span>,
<span class="w">    </span><span class="s">&quot;skillFunction&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="nv">Identity</span>,
<span class="w">    </span><span class="s">&quot;teamSkillFunction&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="nv">Min</span>
<span class="w">    </span><span class="nv">|&gt;</span><span class="p">]</span><span class="c1">;</span>
</code></pre></div>

<p>This is the first simulation that gives us a win rate plot that doesn't look linear:</p>
<p><img alt="Image" src="/images/br-apex-min-wr.png" /></p>
<p>As expected, a player with no chance of winning always loses. It becomes interesting when we look at the win rate of higher skilled players, which starts to flatten around the median since it becomes increasingly likely that there's a worse player on the team. Being above average doesn't really confer a significant benefit in this model.</p>
<p>It's also worth noting that model using the min aggregation function also results in a PDF of player distributions that looks similar to the single-player Tetris 99 model:</p>
<p><img alt="Image" src="/images/br-apex-min-pdf.png" /></p>
<p>The worst players are eliminated rapidly in this model and return to queue at a rate that causes them to be over-represented in new games.</p>
<h2>Max</h2>
<div class="codehilite"><pre><span></span><code><span class="nv">apexMax</span><span class="w"> </span><span class="nb">= </span><span class="nv">SimulateBattleRoyale</span><span class="p">[</span><span class="nv">&lt;|</span>
<span class="w">    </span><span class="s">&quot;playerCount&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="mi">1000</span>,
<span class="w">    </span><span class="s">&quot;teamSize&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="mi">3</span>,
<span class="w">    </span><span class="s">&quot;gameSize&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="mi">60</span>,
<span class="w">    </span><span class="s">&quot;iterations&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="mi">10000000</span>,
<span class="w">    </span><span class="s">&quot;skillFunction&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="nv">Identity</span>,
<span class="w">    </span><span class="s">&quot;teamSkillFunction&quot;</span><span class="w"> </span><span class="nb">-&gt; </span><span class="nv">Max</span>
<span class="w">    </span><span class="nv">|&gt;</span><span class="p">]</span><span class="c1">;</span>
</code></pre></div>

<p>When we use the max aggregration function we see the opposite effect on the expected win rates:</p>
<p><img alt="Image" src="/images/br-apex-max-wr.png" /></p>
<p>Below median players are rarely the determining factor in their team's performance, so we see a relatively flat win rate for the bottom half of the population and then see steady growth at the higher skills.</p>
<p>And here's the distribution of players in new games when using the max aggregation:</p>
<p><img alt="Image" src="/images/br-apex-max-pdf.png" /></p>
<p>While it decreases slowly like in the mean aggregation model, it's interesting to note that it's relatively flat for the bottom quartile of players and has a negative 2nd derivative instead of positive like before.</p>
<h1>Conclusion</h1>
<h2>Possible Extensions</h2>
<p>This simulation framework makes several simplifying assumptions that could be addressed in future iterations:</p>
<ul>
<li>
<p><strong>Skill Distribution</strong>: The uniform distribution used here doesn't reflect reality. Most competitive games exhibit a log-normal or Pareto distribution with a long tail of highly skilled players. Modeling with these distributions would likely show even more dramatic effects on average player win rates.</p>
</li>
<li>
<p><strong>Skill-Based Matchmaking (SBMM)</strong>: Many modern battle royales use SBMM to group players of similar skill levels. This would fundamentally change the dynamics, potentially pushing win rates closer to the baseline 1/20 for all skill levels.</p>
</li>
<li>
<p><strong>Pre-made Squads</strong>: The simulation assumes all players solo-queue with random teammates. Pre-made squads of coordinated players would have advantages beyond just aggregated skill levels, introducing another dimension to team performance.</p>
</li>
<li>
<p><strong>Temporal Dynamics</strong>: Player skills evolve over time through practice and learning. Additionally, game meta shifts can advantage different playstyles. A more sophisticated model could incorporate these time-based factors.</p>
</li>
<li>
<p><strong>Game Phase Modeling</strong>: The probabilistic elimination used here doesn't capture the complexity of different game phases. Early game RNG (loot distribution), mid-game positioning, and end-game ring dynamics all affect outcomes differently.</p>
</li>
<li>
<p><strong>Server and Geographic Effects</strong>: Real games have players distributed across different servers with varying skill pools and connection qualities that affect performance.</p>
</li>
</ul>
<h2>Key Takeaways</h2>
<p>Despite its simplifications, this simulation reveals several important insights about battle royale win rates:</p>
<ol>
<li>
<p><strong>Queue dynamics matter significantly</strong>: Because worse players are eliminated faster and return to queue more frequently, they're overrepresented in new games. This can increase win rates for all players by 20-30% compared to a naive calculation.</p>
</li>
<li>
<p><strong>Team aggregation functions have dramatic effects</strong>: The choice between mean, min, or max aggregation fundamentally changes the relationship between individual skill and win rate. Games where carrying is possible (max aggregation) advantage top players, while games limited by the weakest link (min aggregation) compress skill expression.</p>
</li>
<li>
<p><strong>Below average players can win more than expected</strong>: In team-based battle royales with mean skill aggregation or carry-dynamics, even below-average players maintain reasonable win rates due to the chance of being paired with stronger teammates.</p>
</li>
<li>
<p><strong>Win rate curves are often non-linear</strong>: Depending on the aggregation function, the relationship between skill and win rate can be surprisingly flat across large skill ranges. This has important implications for how rewarding games feel at different skill levels.</p>
</li>
<li>
<p><strong>Population size affects competitive dynamics</strong>: Larger player populations lead to more pronounced queue effects, as the contrast between active game composition and overall population becomes more significant.</p>
</li>
</ol>
<p>These findings suggest that if you're an average Apex Legends player frustrated by your win rate, remember that the deck is somewhat stacked against you, but perhaps not as badly as simple math might suggest. The complex interplay of queue dynamics, team composition, and skill aggregation creates a more forgiving environment than a pure skill hierarchy would produce.</p>
    </article>
    <footer class="post-footer">
        <a href="/" class="home-link">← Back to Home</a>
    </footer>
</body>
</html>